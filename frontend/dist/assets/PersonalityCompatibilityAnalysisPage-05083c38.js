var K=Object.defineProperty;var W=(p,t,n)=>t in p?K(p,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):p[t]=n;var U=(p,t,n)=>(W(p,typeof t!="symbol"?t+"":t,n),n);import{c as Z,r as h,j as e,B as q,a as P}from"./index-bafb1997.js";import{C as b,b as D,c as Q,a as f}from"./card-3c31d0b0.js";import{B as j}from"./badge-961e49a9.js";import{F as J,P as X,A as Y,C as _,S as V}from"./progress-25652780.js";import{A}from"./arrow-left-662fd7f3.js";import{U as H}from"./users-7383b19b.js";import{C as ee}from"./chevron-down-9c18f6d6.js";/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const se=Z("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);class G{static analyzeCompatibility(t,n){const r=new Set([...Object.keys(t),...Object.keys(n)]),s=Object.keys(t)[0];Object.keys(n)[0];let o={},i={};s&&typeof t[s]=="object"&&(Object.entries(t).forEach(([u,l])=>{if(typeof l=="object"&&l!==null&&"questionId"in l){const g=l;o[g.questionId]=g.answer}else typeof l=="string"&&(o[u]=l)}),Object.entries(n).forEach(([u,l])=>{if(typeof l=="object"&&l!==null&&"questionId"in l){const g=l;i[g.questionId]=g.answer}else typeof l=="string"&&(i[u]=l)}),Object.keys(o).length>0&&(t=o,n=i));for(const u of Array.from(r).slice(0,10))t[u],n[u];if(Object.keys(t).length<32)return{totalCompatibility:0,percentage:0,categoryResults:this.getEmptyCategoryResults(),overallCompatible:!1,recommendations:["❌ No hay suficientes preguntas para analizar. Se requieren al menos 32 preguntas."],detailedAnswers:{person1Answers:t,person2Answers:n,questionTexts:this.questionTexts}};const v=this.analyzeSociables(t,n),w=this.analyzeCuriosos(t,n),C=this.analyzeEmpaticos(t,n),E=this.analyzePocoEmpaticos(t,n),M=this.analyzeImprovisacion(t,n),k=this.analyzeAutocontrol(t,n),T=this.analyzeInseguros(t,n),O=this.analyzeSensibles(t,n),S=this.analyzeOrganizados(t,n),$=this.analyzeCreativos(t,n),I=this.analyzeBajaTolerancia(t,n),L=this.analyzeImpulsivos(t,n),z=this.analyzeLogicos(t,n),R=this.analyzeLideres(t,n),B=this.analyzeSeguridad(t,n),N={sociables:v,curiosos:w,empaticos:C,pocoEmpaticos:E,improvisacion:M,autocontrol:k,inseguros:T,sensibles:O,organizados:S,creativos:$,bajaTolerancia:I,impulsivos:L,logicos:z,lideres:R,seguridad:B},a=Object.values(N).reduce((u,l)=>u+l.score,0),m=Object.values(N).reduce((u,l)=>u+l.max,0),c=Math.round(a/m*100),d=a>=35,x=this.generateRecommendations(N,a,c);return{totalCompatibility:a,percentage:c,categoryResults:N,overallCompatible:d,recommendations:x,detailedAnswers:{person1Answers:t,person2Answers:n,questionTexts:this.questionTexts}}}static analyzeSociables(t,n){const r=["1","2","3","4","5","6","7"],s=this.countMatches(t,n,r),o=7,i=Math.round(s/o*100);return{score:s,max:o,percentage:i,compatible:s>=4}}static analyzeCuriosos(t,n){const r=["8","9","10","11","12","13","14","15","16","17","18","19","20","21","50","51","61","62"],s=this.countMatches(t,n,r),o=18,i=Math.round(s/o*100);return{score:s,max:o,percentage:i,compatible:s>=8}}static analyzeEmpaticos(t,n){const r=["23","24","25"],s=this.countMatches(t,n,r),o=3,i=Math.round(s/o*100);return{score:s,max:o,percentage:i,compatible:s>=1}}static analyzePocoEmpaticos(t,n){const r=["22","26","27"],s=this.countMatches(t,n,r),o=3,i=Math.round(s/o*100);return{score:s,max:o,percentage:i,compatible:s>=2}}static analyzeImprovisacion(t,n){const r=["28","56","57"],s=this.countMatches(t,n,r),o=3,i=Math.round(s/o*100);return{score:s,max:o,percentage:i,compatible:s>=2}}static analyzeAutocontrol(t,n){const r=["29","30","31"],s=this.countMatches(t,n,r),o=3,i=Math.round(s/o*100);return{score:s,max:o,percentage:i,compatible:s>=2}}static analyzeInseguros(t,n){const r=["32","33","34","35","36","37","38","39","52","53"],s=this.countMatches(t,n,r),o=10,i=Math.round(s/o*100);return{score:s,max:o,percentage:i,compatible:s>=5}}static analyzeSensibles(t,n){const r=["40","41","42","46","47"],s=this.countMatches(t,n,r),o=5,i=Math.round(s/o*100);return{score:s,max:o,percentage:i,compatible:s>=4}}static analyzeOrganizados(t,n){const r=["43","44","45"],s=this.countMatches(t,n,r),o=3,i=Math.round(s/o*100);return{score:s,max:o,percentage:i,compatible:s>=1}}static analyzeCreativos(t,n){const r=["48","49"],s=this.countMatches(t,n,r),o=2,i=Math.round(s/o*100);return{score:s,max:o,percentage:i,compatible:s>=1}}static analyzeBajaTolerancia(t,n){const r=["54"],s=this.countMatches(t,n,r),o=1,i=Math.round(s/o*100);return{score:s,max:o,percentage:i,compatible:s>=1}}static analyzeImpulsivos(t,n){const r=["55"],s=this.countMatches(t,n,r),o=1,i=Math.round(s/o*100);return{score:s,max:o,percentage:i,compatible:s>=1}}static analyzeLogicos(t,n){const r=["58"],s=this.countMatches(t,n,r),o=1,i=Math.round(s/o*100);return{score:s,max:o,percentage:i,compatible:s>=1}}static analyzeLideres(t,n){const r=["59","60"],s=this.countMatches(t,n,r),o=2,i=Math.round(s/o*100);return{score:s,max:o,percentage:i,compatible:s>=1}}static analyzeSeguridad(t,n){const r=["63","64"],s=this.countMatches(t,n,r),o=2,i=Math.round(s/o*100);return{score:s,max:o,percentage:i,compatible:s>=1}}static countMatches(t,n,r){let s=0,o=[];for(const i of r){const y=t[i],v=n[i];y&&v&&y===v?(s++,o.push(`${i}:✅`)):o.push(`${i}:❌`)}return console.log(`🔍 Preguntas [${r.join(",")}] -> ${s}/${r.length} matches [${o.join(" ")}]`),s}static getEmptyCategoryResults(){return{sociables:{score:0,max:7,percentage:0,compatible:!1},curiosos:{score:0,max:18,percentage:0,compatible:!1},empaticos:{score:0,max:3,percentage:0,compatible:!1},pocoEmpaticos:{score:0,max:3,percentage:0,compatible:!1},improvisacion:{score:0,max:3,percentage:0,compatible:!1},autocontrol:{score:0,max:3,percentage:0,compatible:!1},inseguros:{score:0,max:10,percentage:0,compatible:!1},sensibles:{score:0,max:5,percentage:0,compatible:!1},organizados:{score:0,max:3,percentage:0,compatible:!1},creativos:{score:0,max:2,percentage:0,compatible:!1},bajaTolerancia:{score:0,max:1,percentage:0,compatible:!1},impulsivos:{score:0,max:1,percentage:0,compatible:!1},logicos:{score:0,max:1,percentage:0,compatible:!1},lideres:{score:0,max:2,percentage:0,compatible:!1},seguridad:{score:0,max:2,percentage:0,compatible:!1}}}static generateRecommendations(t,n,r){const s=[];return r>=80?s.push("🎉 ¡Excelente compatibilidad! Ustedes tienen una personalidad muy similar."):r>=60?s.push("👍 Buena compatibilidad. Sus personalidades se complementan bien."):r>=40?s.push("🤝 Compatibilidad media. Hay áreas de mejora pero pueden funcionar."):s.push("⚠️ Baja compatibilidad. Podrían tener dificultades para entenderse."),t.sociables.compatible||s.push("💬 Diferentes niveles de sociabilidad. Consideren cómo esto afecta sus interacciones."),t.empaticos.compatible||s.push("❤️ Diferentes niveles de empatía. Trabajen en la comunicación emocional."),t.organizados.compatible||s.push("📅 Diferentes estilos de organización. Establezcan rutinas que funcionen para ambos."),t.inseguros.score>=5&&s.push("💪 Ambos muestran inseguridad. Consideren trabajar en la autoestima juntos."),s}}U(G,"questionTexts",{1:"¿Conectas fácilmente con gente nueva?",2:"¿Te resulta fácil establecer conversación con un desconocido?",3:"¿Te sientes más cómodo estando solo que en grupo?",4:"¿Socializar puede agotar tu energía rápidamente?",5:"¿Prefieres las llamadas telefónicas a los mensajes de texto cuando te comunicas con otras personas?",6:"¿En situaciones sociales prefieres quedarte con caras conocidas antes que conocer a otras nuevas?",7:"¿Prefieres las actividades en solitario a las interacciones en grupo?",8:"¿Debatir y analizar obras creativas te apasiona?",9:"¿Te gustan las películas con conclusiones abiertas que permitan la interpretación?",10:"¿Siempre te han intrigado los misterios de la vida después de la muerte?",11:"¿Te encanta debatir conceptos teóricos y puedes pasarte horas conversando sobre ellos?",12:"¿A menudo reflexionas sobre el significado de las cosas en lugar de aceptarlas sin más?",13:"¿Te atraen las nuevas experiencias y te gusta explorar lugares desconocidos?",14:"¿Te gusta mantener conversaciones profundas que inviten a la reflexión?",15:"¿Reflexionar sobre experiencias pasadas te ayuda a comprender tus creencias y valores actuales?",16:"¿Disfrutas aprendiendo nuevas ideas y conceptos, buscando constantemente el conocimiento?",17:"¿Te gustan los debates animados en los que puedes compartir e intercambiar ideas con los demás?",18:"¿La curiosidad te impulsa a explorar nuevas ideas y temas en profundidad?",19:"¿Puedes pasarte horas profundizando en los temas que despiertan tu curiosidad?",20:"¿Eres paciente con las personas que no son tan rápidas o eficientes como tú?",21:"¿Cuándo alguien a tu alrededor está disgustado tiendes a sentir también sus emociones?",22:"¿Te cuesta empatizar con personas de orígenes muy diferentes?",23:"¿Cuándo alguien piensa de forma diferente a ti, intentas comprender de verdad a la otra parte?",24:"¿Valoras la honestidad por encima del tacto, aunque sea duro?",25:"¿Empatizas con los sentimientos de los demás, aunque no hayas compartido sus experiencias?",26:"¿Alcanzar metas personales te produce más satisfacción que ayudar a los demás?",27:"¿A veces te cuesta entender las emociones de los demás?",28:"¿Sueles hacer planes de emergencia?",29:"¿Mantienes la compostura incluso bajo presión?",30:"¿Los entornos dinámicos y de ritmo rápido te dan energía y te desenvuelves bien bajo presión?",31:"¿Te gustan los retos, especialmente en entornos de alta presión?",32:"¿En situaciones sociales prefieres quedarte con caras conocidas antes que conocer a otras nuevas?",33:"¿Un pequeño error a veces puede hacer dudar de tus conocimientos generales sobre un tema?",34:"¿Conocer gente nueva te hace preocuparte por la impresión que has causado?",35:"¿Con frecuencia te preocupas por el peor escenario posible en cualquier situación?",36:"¿A menudo consideras las decisiones que has tomado?",37:"¿La inseguridad es algo con lo que lidias a menudo?",38:"¿Los errores de tu pasado suelen perdurar en la memoria?",39:"¿A menudo te preocupas por incertidumbres futuras, incluso en situaciones tranquilas?",40:"¿Eres una persona que aprecia los recuerdos y los objetos sentimentales?",41:"¿Crees que el mundo mejoraría si la gente tomara decisiones más basadas en las emociones?",42:"¿Te molesta que los demás discutan delante de ti?",43:"¿Te gusta organizar tu día con listas y horarios?",44:"¿Prefieres seguir una rutina a ser espontáneo?",45:"¿Te sientes más a gusto cuando tu entorno está ordenado y organizado?",46:"¿A menudo sigues tus sentimientos más que tu lógica?",47:"¿Cuándo tienes que elegir sigues a tu corazón y eliges lo que te parece correcto?",48:"¿Te identificas mucho con ser una persona artística?",49:"¿Te gusta pasar tiempo en museos de arte?",50:"¿Te gusta mantener conversaciones profundas que inviten a la reflexión?",51:"¿La curiosidad te impulsa a explorar nuevas ideas y temas en profundidad?",52:"¿Te gusta ser el centro de atención?",53:"¿Prefieres una rutina diaria bien estructurada y te sientes más cómodo cuando las cosas son predecibles?",54:"¿Prefieres relajarte antes de ocuparte de las tareas domésticas?",55:"¿Prefieres tomar decisiones rápidamente en lugar de pensar en ellas?",56:"¿Confías más en tu instinto que en horarios o planes escritos?",57:"¿Te adaptas fácilmente a los cambios inesperados de planes?",58:"¿A la hora de tomar decisiones, priorizas la lógica y la objetividad sobre las emociones?",59:"¿Tomas las riendas de forma natural en situaciones de grupo guiando a los demás hacia objetivos comunes?",60:"¿Te gusta asumir funciones de liderazgo?",61:"¿Tiendes a ser autocrítico, a reflexionar constantemente sobre tus acciones y a esforzarte por mejorar?",62:"¿Para ti es importante tener objetivos claros y trabajar diligentemente para alcanzarlos?",63:"¿Pasar tiempo a solas es algo que aprecias y encuentras paz en las actividades solitarias?",64:"¿Eres tu mejor amigo?",65:"¿Cómo te gusta pasar tu tiempo libre? (Hobbies)",66:"¿Tienes alguna alergia, fobia o algo que deberíamos tener en cuenta para la cita?"});const de=()=>{const[p,t]=h.useState([]),[n,r]=h.useState(null),[s,o]=h.useState([]),[i,y]=h.useState(!0),[v,w]=h.useState(!1),[C,E]=h.useState(""),[M,k]=h.useState(!1),[T,O]=h.useState(0),[S,$]=h.useState({});h.useEffect(()=>{I()},[]);const I=async()=>{var a;y(!0);try{const m=localStorage.getItem("adminToken");if(!m){t([]),y(!1);return}const c=await fetch("http://localhost:3001/api/admin/questionnaires",{headers:{Authorization:`Bearer ${m}`,"Content-Type":"application/json"}});if(c.ok){const x=((a=(await c.json()).personalidad)==null?void 0:a.questionnaires)||[];t(x)}else t([])}catch{t([])}finally{y(!1)}},L=async a=>{r(a),w(!0),await new Promise(c=>setTimeout(c,1e3));const m=[];p.forEach(c=>{if(c.id!==a.id)try{const d=G.analyzeCompatibility(a.answers,c.answers);m.push({person:c,compatibility:d,matchRank:0})}catch{}}),m.sort((c,d)=>d.compatibility.percentage-c.compatibility.percentage),m.forEach((c,d)=>{c.matchRank=d+1}),o(m),w(!1)},z=()=>s.filter(a=>{const m=C===""||`${a.person.personalInfo.nombre} ${a.person.personalInfo.apellidos}`.toLowerCase().includes(C.toLowerCase()),c=!M||a.compatibility.overallCompatible,d=a.compatibility.percentage>=T;return m&&c&&d}),R=a=>a>=90?"text-green-600 bg-green-50 border-green-200":a>=80?"text-blue-600 bg-blue-50 border-blue-200":a>=70?"text-purple-600 bg-purple-50 border-purple-200":a>=60?"text-yellow-600 bg-yellow-50 border-yellow-200":"text-red-600 bg-red-50 border-red-200",B=a=>a===1?e.jsx(_,{className:"h-5 w-5 text-yellow-500"}):a===2?e.jsx(V,{className:"h-5 w-5 text-gray-400"}):a===3?e.jsx(V,{className:"h-5 w-5 text-orange-400"}):e.jsxs("span",{className:"text-gray-500 font-bold",children:["#",a]}),N=a=>{$(m=>({...m,[a]:!m[a]}))};return i?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Cargando usuarios..."})]})}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-50 p-6",children:e.jsxs("div",{className:"max-w-7xl mx-auto mb-8",children:[e.jsx("div",{className:"flex items-center justify-between mb-6",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(q,{onClick:()=>window.location.hash="#/admin-dashboard",variant:"outline",size:"sm",children:[e.jsx(A,{className:"h-4 w-4 mr-2"}),"Volver al Dashboard"]}),e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold text-gray-800 flex items-center gap-3",children:[e.jsx(P,{className:"h-8 w-8 text-blue-500"}),"Análisis de Compatibilidad de Personalidad"]}),e.jsx("p",{className:"text-gray-600",children:"Selecciona una persona y encuentra sus mejores matches"})]})]})}),n?e.jsxs(e.Fragment,{children:[e.jsx(b,{className:"mb-8 bg-gradient-to-r from-blue-100 to-indigo-100",children:e.jsx(D,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"w-16 h-16 bg-gradient-to-r from-blue-500 to-indigo-600 rounded-full flex items-center justify-center text-white font-bold text-xl",children:[n.personalInfo.nombre.charAt(0),n.personalInfo.apellidos.charAt(0)]}),e.jsxs("div",{children:[e.jsxs(Q,{className:"text-2xl",children:[n.personalInfo.nombre," ",n.personalInfo.apellidos]}),e.jsxs("div",{className:"flex gap-3 mt-2",children:[e.jsxs(j,{variant:"secondary",children:[n.personalInfo.edad," años"]}),e.jsx(j,{variant:"outline",children:n.personalInfo.genero}),e.jsx(j,{variant:"outline",children:n.personalInfo.orientacionSexual})]})]})]}),e.jsx(q,{onClick:()=>{r(null),o([])},variant:"outline",children:"Cambiar Persona"})]})})}),v?e.jsx(b,{children:e.jsxs(f,{className:"p-8 text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Analizando Compatibilidad..."}),e.jsxs("p",{className:"text-gray-600",children:["Comparando con ",p.length-1," personas. Esto puede tomar unos segundos."]})]})}):s.length>0&&e.jsxs(e.Fragment,{children:[e.jsxs(b,{className:"mb-6",children:[e.jsx(D,{children:e.jsxs(Q,{className:"flex items-center gap-2",children:[e.jsx(J,{className:"h-5 w-5 text-gray-600"}),"Filtrar Resultados"]})}),e.jsx(f,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"🔍 Buscar"}),e.jsx("input",{type:"text",placeholder:"Nombre...",value:C,onChange:a=>E(a.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"📊 Compatibilidad Mínima"}),e.jsxs("select",{value:T,onChange:a=>O(Number(a.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:0,children:"Todos los matches"}),e.jsx("option",{value:40,children:"40% o más"}),e.jsx("option",{value:60,children:"60% o más"}),e.jsx("option",{value:80,children:"80% o más"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"🧠 Solo Compatibles"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"showOnlyCompatible",checked:M,onChange:a=>k(a.target.checked),className:"mr-2"}),e.jsx("label",{htmlFor:"showOnlyCompatible",className:"text-sm text-gray-600",children:"Mostrar solo compatibles (35+ puntos)"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"📈 Estadísticas"}),e.jsxs("div",{className:"text-sm text-gray-600",children:[z().length," de ",s.length," resultados"]})]})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-8",children:[e.jsx(b,{children:e.jsxs(f,{className:"p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:s.length}),e.jsx("div",{className:"text-sm text-gray-600",children:"Total Análisis"})]})}),e.jsx(b,{children:e.jsxs(f,{className:"p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:s.filter(a=>a.compatibility.overallCompatible).length}),e.jsx("div",{className:"text-sm text-gray-600",children:"Compatibles (35+)"})]})}),e.jsx(b,{children:e.jsxs(f,{className:"p-4 text-center",children:[e.jsxs("div",{className:"text-2xl font-bold text-purple-600",children:[s.length>0?Math.round(s[0].compatibility.percentage):0,"%"]}),e.jsx("div",{className:"text-sm text-gray-600",children:"Mejor Match"})]})}),e.jsx(b,{children:e.jsxs(f,{className:"p-4 text-center",children:[e.jsxs("div",{className:"text-2xl font-bold text-gray-600",children:[Math.round(s.reduce((a,m)=>a+m.compatibility.percentage,0)/s.length)||0,"%"]}),e.jsx("div",{className:"text-sm text-gray-600",children:"Promedio General"})]})})]}),e.jsx("div",{className:"space-y-4",children:z().map((a,m)=>e.jsx(b,{className:`transition-all hover:shadow-lg ${R(a.compatibility.percentage)} border-2`,children:e.jsxs(f,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[B(a.matchRank),e.jsxs("div",{className:"w-12 h-12 bg-gradient-to-r from-blue-400 to-indigo-500 rounded-full flex items-center justify-center text-white font-bold text-lg",children:[a.person.personalInfo.nombre.charAt(0),a.person.personalInfo.apellidos.charAt(0)]})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-800",children:[a.person.personalInfo.nombre," ",a.person.personalInfo.apellidos]}),e.jsxs("div",{className:"flex gap-2 mt-1",children:[e.jsxs(j,{variant:"secondary",className:"text-xs",children:[a.person.personalInfo.edad," años"]}),e.jsx(j,{variant:"outline",className:"text-xs",children:a.person.personalInfo.genero}),e.jsx(j,{variant:"outline",className:"text-xs",children:a.person.personalInfo.orientacionSexual})]})]})]}),e.jsx("div",{className:"text-right",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"text-2xl font-bold",children:[a.compatibility.percentage,"%"]}),e.jsx("div",{className:"text-sm text-gray-600",children:a.compatibility.overallCompatible?"Compatible":"No compatible"})]}),e.jsx("div",{className:"w-24",children:e.jsx(X,{value:a.compatibility.percentage,className:"h-3"})}),e.jsx("div",{className:"flex flex-col gap-2",children:e.jsx(j,{variant:a.compatibility.overallCompatible?"default":"destructive",className:"text-xs",children:a.compatibility.overallCompatible?e.jsxs(e.Fragment,{children:[e.jsx(P,{className:"h-3 w-3 mr-1"}),"Personalidad compatible"]}):e.jsxs(e.Fragment,{children:[e.jsx(Y,{className:"h-3 w-3 mr-1"}),"Personalidad incompatible"]})})})]})})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("h4",{className:"font-medium text-gray-800 mb-3",children:"Compatibilidad por categorías:"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-2",children:Object.entries(a.compatibility.categoryResults).map(([c,d])=>e.jsxs("div",{className:`text-center p-2 rounded text-xs border ${d.compatible?"bg-green-100 border-green-200 text-green-800":"bg-gray-100 border-gray-200 text-gray-600"}`,children:[e.jsx("div",{className:"font-medium capitalize text-xs",children:c.replace(/([A-Z])/g," $1").trim()}),e.jsxs("div",{className:"text-xs font-bold",children:[d.score,"/",d.max," (",d.percentage,"%)"]})]},c))})]}),a.compatibility.recommendations.length>0&&e.jsxs("div",{className:"mt-4 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[e.jsxs("h4",{className:"font-medium text-blue-800 mb-2 flex items-center gap-2",children:[e.jsx(P,{className:"h-4 w-4"}),"Recomendaciones de personalidad:"]}),e.jsx("div",{className:"space-y-1",children:a.compatibility.recommendations.map((c,d)=>e.jsxs("div",{className:"text-sm text-blue-700 flex items-start gap-2",children:[e.jsx("span",{className:"text-blue-500 mt-1",children:"•"}),e.jsx("span",{children:c})]},d))})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx(q,{variant:"outline",size:"sm",onClick:()=>N(a.person.id),className:"w-full flex items-center justify-center gap-2",children:S[a.person.id]?e.jsxs(e.Fragment,{children:[e.jsx(se,{className:"h-4 w-4"}),"Ocultar respuestas detalladas"]}):e.jsxs(e.Fragment,{children:[e.jsx(ee,{className:"h-4 w-4"}),"Ver respuestas detalladas"]})}),S[a.person.id]&&a.compatibility.detailedAnswers&&e.jsxs("div",{className:"mt-4 p-4 bg-gray-50 border border-gray-200 rounded-lg",children:[e.jsx("h4",{className:"font-medium text-gray-800 mb-4 flex items-center gap-2",children:"📋 Comparación de Respuestas"}),e.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:Object.keys(a.compatibility.detailedAnswers.questionTexts).map(c=>{const d=a.compatibility.detailedAnswers.questionTexts[c],x=a.compatibility.detailedAnswers.person1Answers[c],u=a.compatibility.detailedAnswers.person2Answers[c],l=typeof x=="string"?x:typeof x=="object"&&x!==null&&"answer"in x?String(x.answer):"Sin respuesta",g=typeof u=="string"?u:typeof u=="object"&&u!==null&&"answer"in u?String(u.answer):"Sin respuesta",F=l&&g&&l===g;return e.jsxs("div",{className:`p-3 rounded border-l-4 ${F?"bg-green-50 border-green-400":"bg-red-50 border-red-400"}`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-600",children:["Pregunta ",c,":"]}),e.jsx("span",{className:`text-xs px-2 py-1 rounded ${F?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:F?"✅ Coinciden":"❌ Difieren"})]}),e.jsx("p",{className:"text-sm text-gray-700 mb-3 font-medium",children:d||`Pregunta ${c}`}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsxs("div",{className:"bg-blue-50 p-2 rounded",children:[e.jsxs("span",{className:"text-xs font-medium text-blue-600",children:[n==null?void 0:n.personalInfo.nombre,":"]}),e.jsx("p",{className:"text-sm text-blue-800 font-medium",children:l})]}),e.jsxs("div",{className:"bg-purple-50 p-2 rounded",children:[e.jsxs("span",{className:"text-xs font-medium text-purple-600",children:[a.person.personalInfo.nombre,":"]}),e.jsx("p",{className:"text-sm text-purple-800 font-medium",children:g})]})]})]},c)})})]})]})]})},a.person.id))}),z().length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(P,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No se encontraron resultados"}),e.jsx("p",{className:"text-gray-600",children:"Intenta ajustar los filtros de búsqueda o compatibilidad mínima."})]})]})]}):e.jsxs(b,{className:"mb-8",children:[e.jsx(D,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(Q,{className:"flex items-center gap-2",children:[e.jsx(H,{className:"h-6 w-6 text-blue-500"}),"Selecciona la Persona Principal"]}),e.jsxs(q,{onClick:I,variant:"outline",size:"sm",disabled:i,children:[i?e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-500 mr-2"}):e.jsx("div",{className:"w-4 h-4 mr-2",children:"🔄"}),"Recargar"]})]})}),e.jsx(f,{children:i?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-600 mb-2",children:"Cargando cuestionarios..."}),e.jsx("p",{className:"text-gray-500",children:"Conectando con la base de datos..."})]}):p.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(H,{className:"h-8 w-8 text-gray-400"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-600 mb-2",children:"No hay cuestionarios disponibles"}),e.jsx("p",{className:"text-gray-500 mb-4",children:"Para usar el análisis de compatibilidad, necesitas tener cuestionarios de personalidad completados."}),e.jsxs("div",{className:"space-y-2 text-sm text-gray-600",children:[e.jsx("p",{children:"• Ve al Panel de Administración"}),e.jsx("p",{children:"• Verifica que haya cuestionarios de personalidad completados"}),e.jsx("p",{children:"• Asegúrate de estar logueado como administrador"})]}),e.jsxs(q,{onClick:()=>window.location.hash="#/admin-dashboard",variant:"outline",className:"mt-4",children:[e.jsx(A,{className:"h-4 w-4 mr-2"}),"Ir al Panel de Administración"]})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:p.map(a=>e.jsx(b,{className:"hover:shadow-lg transition-shadow cursor-pointer border-2 hover:border-blue-300",onClick:()=>L(a),children:e.jsx(f,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"w-12 h-12 bg-gradient-to-r from-blue-400 to-indigo-500 rounded-full flex items-center justify-center text-white font-bold text-lg",children:[a.personalInfo.nombre.charAt(0),a.personalInfo.apellidos.charAt(0)]}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("h3",{className:"font-semibold text-gray-800",children:[a.personalInfo.nombre," ",a.personalInfo.apellidos]}),e.jsxs("div",{className:"flex gap-2 mt-1",children:[e.jsxs(j,{variant:"secondary",className:"text-xs",children:[a.personalInfo.edad," años"]}),e.jsx(j,{variant:"outline",className:"text-xs",children:a.personalInfo.genero})]})]})]})})},a.id))})})]})]})})};export{de as default};
