var U=Object.defineProperty;var _=(d,e,i)=>e in d?U(d,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):d[e]=i;var M=(d,e,i)=>(_(d,typeof e!="symbol"?e+"":e,i),i);import{c as G,r as h,j as t,B as T}from"./index-bafb1997.js";import{C as u,b as P,c as E,a as g}from"./card-3c31d0b0.js";import{B as m}from"./badge-961e49a9.js";import{F as $,P as W,A as J,C as K,S as F}from"./progress-25652780.js";import{A as D}from"./arrow-left-662fd7f3.js";import{H as X}from"./heart-7330f7b6.js";import{U as R}from"./users-7383b19b.js";/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y=G("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);class q{static getQuestions(){return this.compatibilityQuestions}static analyzeCompatibility(e,i){let s=0;const n=90,r=[],o=[];let x=!1,b=!1;for(let v=0;v<this.compatibilityQuestions.length;v++){const j=this.compatibilityQuestions[v],C=e.find(I=>I.questionId===j.id),A=i.find(I=>I.questionId===j.id);if(!C||!A)continue;const N=this.analyzeCategoryCompatibility(j,C,A);if(s+=N.score,r.push(N),this.checkForViolence(C.answer)||this.checkForViolence(A.answer)){x=!0,b=!0,o.push("‚ö†Ô∏è Se han detectado indicios de violencia. Se recomienda encarecidamente buscar ayuda profesional.");break}N.score===2&&o.push(`‚ùå Incompatibilidad total en: ${j.category}`)}const L=Math.round(s/n*100),S=this.getCompatibilityLevel(s),w=s>=54;return s<54&&o.push("üì∏ La puntuaci√≥n es insuficiente para mostrar fotograf√≠as de potenciales parejas."),s>=54&&s<64&&o.push("üí° Compatibilidad media. Se sugiere trabajar en las √°reas de menor puntuaci√≥n."),s>=84&&o.push("üéâ ¬°Excelente compatibilidad! Tienen una base s√≥lida para una relaci√≥n exitosa."),{totalScore:s,maxScore:n,compatibilityPercentage:L,compatibilityLevel:S,canShowPhotos:w,shouldStopAnalysis:x,recommendTherapy:b,detailedAnalysis:r,recommendations:o}}static analyzeCategoryCompatibility(e,i,s){let n=0,r=!1,o="";switch(e.analysisType){case"similarity":n=this.calculateSimilarityScore(i.answer,s.answer),r=n>=3,o=this.getSimilarityAnalysis(n);break;case"importance":n=this.calculateImportanceScore(i.answer,s.answer),r=n>=3,o=this.getImportanceAnalysis(n);break;case"communication":n=this.calculateCommunicationScore(i.answer,s.answer),r=this.isCommunicationCompatible(i.answer,s.answer),o=this.getCommunicationAnalysis(i.answer,s.answer);break;case"conflict_reaction":case"conflict_resolution":n=this.calculateConflictScore(i.answer,s.answer),r=this.isConflictCompatible(i.answer,s.answer),o=this.getConflictAnalysis(i.answer,s.answer);break;case"security":n=this.calculateSecurityScore(i.answer,s.answer),r=this.isSecurityCompatible(i.answer,s.answer),o=this.getSecurityAnalysis(i.answer,s.answer);break;case"impulse_control":n=this.calculateImpulseControlScore(i.answer,s.answer),r=this.isImpulseControlCompatible(i.answer,s.answer),o=this.getImpulseControlAnalysis(i.answer,s.answer);break;case"tolerance":n=this.calculateToleranceScore(i.answer,s.answer),r=this.isToleranceCompatible(i.answer,s.answer),o=this.getToleranceAnalysis(i.answer,s.answer);break;case"success_rate":n=this.calculateSuccessScore(i.answer,s.answer),r=n>=3,o=this.getSuccessAnalysis(n);break;case"honesty":n=this.calculateHonestyScore(i.answer,s.answer),r=this.isHonestyCompatible(i.answer,s.answer),o=this.getHonestyAnalysis(i.answer,s.answer);break;case"forgiveness":n=this.calculateForgivenessScore(i.answer,s.answer),r=this.isForgivenessCompatible(i.answer,s.answer),o=this.getForgivenessAnalysis(i.answer,s.answer);break;default:n=3,r=!0,o="An√°lisis general"}return{category:e.category,score:n,maxScore:5,analysis:o,compatible:r}}static checkForViolence(e){const i=typeof e=="string"?e:(e==null?void 0:e.answer)||String(e)||"";return["golpeo","pego","violento","violencia","agredir","agresi√≥n","lastimar","lastimo","gritar","grito","insultar","insulto"].some(n=>i.toLowerCase().includes(n))}static calculateSimilarityScore(e,i){const s=this.calculateTextSimilarity(e,i);return s>=.8?5:s>=.6?3:1}static calculateTextSimilarity(e,i){const s=typeof e=="string"?e:(e==null?void 0:e.answer)||String(e)||"",n=typeof i=="string"?i:(i==null?void 0:i.answer)||String(i)||"",r=s.toLowerCase().split(" "),o=n.toLowerCase().split(" ");return r.filter(b=>o.includes(b)).length/Math.max(r.length,o.length)}static calculateImportanceScore(e,i){const s=this.getImportanceLevel(e),n=this.getImportanceLevel(i),r=Math.abs(s-n);return r===0?5:r===1?3:1}static getImportanceLevel(e){const s=(typeof e=="string"?e:(e==null?void 0:e.answer)||String(e)||"").toLowerCase();return s.includes("muy importante")||s.includes("esencial")?3:s.includes("algo importante")||s.includes("importante")?2:1}static calculateCommunicationScore(e,i){const s=this.getCommunicationLevel(e),n=this.getCommunicationLevel(i);return Math.min(s,n)}static getCommunicationLevel(e){const s=(typeof e=="string"?e:(e==null?void 0:e.answer)||String(e)||"").toLowerCase();return s.includes("mucha comunicaci√≥n")||s.includes("f√°cil")?5:s.includes("algo de comunicaci√≥n")||s.includes("normal")?3:1}static isCommunicationCompatible(e,i){const s=this.getCommunicationLevel(e),n=this.getCommunicationLevel(i);return s>=3&&n>=3||s===5||n===5}static calculateConflictScore(e,i){if(this.checkForViolence(e)||this.checkForViolence(i))return 0;const s=this.getConflictStyle(e),n=this.getConflictStyle(i);return this.getConflictCompatibilityScore(s,n)}static getConflictStyle(e){const s=(typeof e=="string"?e:(e==null?void 0:e.answer)||String(e)||"").toLowerCase();return s.includes("comunicaci√≥n")||s.includes("hablo")?"communication":s.includes("distancia")||s.includes("espacio")?"distance":this.checkForViolence(e)?"violence":"neutral"}static getConflictCompatibilityScore(e,i){return e==="violence"||i==="violence"?0:e==="communication"&&i==="communication"?5:e==="communication"&&i==="distance"||e==="distance"&&i==="communication"?3:e==="distance"&&i==="distance"?1:3}static isConflictCompatible(e,i){return this.calculateConflictScore(e,i)>=3}static calculateSecurityScore(e,i){const s=this.getSecurityLevel(e),n=this.getSecurityLevel(i);return Math.min(s,n)}static getSecurityLevel(e){const s=(typeof e=="string"?e:(e==null?void 0:e.answer)||String(e)||"").toLowerCase();return s.includes("mucha seguridad")||s.includes("seguro")?5:s.includes("algo de seguridad")||s.includes("normal")?3:1}static isSecurityCompatible(e,i){const s=this.getSecurityLevel(e),n=this.getSecurityLevel(i);return s>=3&&n>=3||s===5||n===5}static calculateImpulseControlScore(e,i){const s=this.getImpulseControlLevel(e),n=this.getImpulseControlLevel(i);return Math.min(s,n)}static getImpulseControlLevel(e){const s=(typeof e=="string"?e:(e==null?void 0:e.answer)||String(e)||"").toLowerCase();return s.includes("espacio")||s.includes("pensar")?5:s.includes("depende")||s.includes("a veces")?3:1}static isImpulseControlCompatible(e,i){const s=this.getImpulseControlLevel(e),n=this.getImpulseControlLevel(i);return!(s===1&&n===1)}static calculateToleranceScore(e,i){const s=this.getToleranceLevel(e),n=this.getToleranceLevel(i);return Math.min(s,n)}static getToleranceLevel(e){const s=(typeof e=="string"?e:(e==null?void 0:e.answer)||String(e)||"").toLowerCase();return s.includes("muy tolerante")||s.includes("acepto")?5:s.includes("algo tolerante")||s.includes("depende")?3:1}static isToleranceCompatible(e,i){const s=this.getToleranceLevel(e),n=this.getToleranceLevel(i);return!(s===1&&n===1)}static calculateSuccessScore(e,i){const s=this.getSuccessLevel(e),n=this.getSuccessLevel(i);return Math.min(s,n)}static getSuccessLevel(e){const s=(typeof e=="string"?e:(e==null?void 0:e.answer)||String(e)||"").toLowerCase();return s.includes("muy exitoso")||s.includes("bien")?5:s.includes("algo exitoso")||s.includes("normal")?3:1}static calculateHonestyScore(e,i){const s=this.getHonestyLevel(e),n=this.getHonestyLevel(i);return Math.min(s,n)}static getHonestyLevel(e){const s=(typeof e=="string"?e:(e==null?void 0:e.answer)||String(e)||"").toLowerCase();return s.includes("muy honesto")||s.includes("sinceridad")?5:s.includes("algo honesto")||s.includes("depende")?3:1}static isHonestyCompatible(e,i){const s=this.getHonestyLevel(e),n=this.getHonestyLevel(i);return!(s===5&&n===1||s===1&&n===5)}static calculateForgivenessScore(e,i){const s=this.getForgivenessLevel(e),n=this.getForgivenessLevel(i);return Math.min(s,n)}static getForgivenessLevel(e){const s=(typeof e=="string"?e:(e==null?void 0:e.answer)||String(e)||"").toLowerCase();return s.includes("perdono")||s.includes("poco rencoroso")?5:s.includes("depende")||s.includes("algo rencoroso")?3:1}static isForgivenessCompatible(e,i){const s=this.getForgivenessLevel(e),n=this.getForgivenessLevel(i);return!(s===1&&n===1)}static getCompatibilityLevel(e){return e>=90?"100% - Totalmente Compatibles":e>=84?"90% - Muy Alta Compatibilidad":e>=74?"80% - Alta Compatibilidad":e>=64?"70% - Buena Compatibilidad":e>=54?"60% - Compatibilidad Media":e>=36?"40% - Baja Compatibilidad":e>=18?"20% - Muy Baja Compatibilidad":"0% - Incompatibles"}static getSimilarityAnalysis(e){return e===5?"Valores y perspectivas muy similares":e===3?"Algunas similitudes en valores":"Valores y perspectivas diferentes"}static getImportanceAnalysis(e){return e===5?"Mismo nivel de importancia":e===3?"Niveles similares de importancia":"Diferentes niveles de importancia"}static getCommunicationAnalysis(e,i){const s=this.getCommunicationLevel(e),n=this.getCommunicationLevel(i);return s>=3&&n>=3?"Buena comunicaci√≥n mutua":s===5||n===5?"Uno compensa la comunicaci√≥n del otro":"Dificultades de comunicaci√≥n"}static getConflictAnalysis(e,i){const s=this.getConflictStyle(e),n=this.getConflictStyle(i);return s==="communication"&&n==="communication"?"Ambos resuelven conflictos mediante comunicaci√≥n":s==="communication"&&n==="distance"||s==="distance"&&n==="communication"?"Estilos complementarios de resoluci√≥n":s==="distance"&&n==="distance"?"Ambos tienden a distanciarse en conflictos":"Estilos de resoluci√≥n variables"}static getSecurityAnalysis(e,i){const s=this.getSecurityLevel(e),n=this.getSecurityLevel(i);return s>=3&&n>=3?"Ambos tienen seguridad emocional":s===5||n===5?"Uno puede brindar seguridad al otro":"Inseguridades emocionales mutuas"}static getImpulseControlAnalysis(e,i){const s=this.getImpulseControlLevel(e),n=this.getImpulseControlLevel(i);return s===1&&n===1?"Ambos tienden a ser impulsivos":s>=3&&n>=3?"Buen autocontrol mutuo":"Niveles variables de autocontrol"}static getToleranceAnalysis(e,i){const s=this.getToleranceLevel(e),n=this.getToleranceLevel(i);return s===1&&n===1?"Ambos son poco tolerantes a las cr√≠ticas":s>=3&&n>=3?"Buena tolerancia mutua":"Niveles variables de tolerancia"}static getSuccessAnalysis(e){return e===5?"Historial exitoso en resoluci√≥n de conflictos":e===3?"Experiencia moderada en resoluci√≥n":"Dificultades previas en resoluci√≥n de conflictos"}static getHonestyAnalysis(e,i){const s=this.getHonestyLevel(e),n=this.getHonestyLevel(i);return s===5&&n===1||s===1&&n===5?"Diferencias significativas en valores de honestidad":s>=3&&n>=3?"Valores similares de honestidad":"Niveles variables de honestidad"}static getForgivenessAnalysis(e,i){const s=this.getForgivenessLevel(e),n=this.getForgivenessLevel(i);return s===1&&n===1?"Ambos tienden a guardar rencor":s>=3&&n>=3?"Buena capacidad de perd√≥n":"Capacidades variables de perd√≥n"}}M(q,"compatibilityQuestions",[{id:1,question:"¬øCu√°les son tres valores fundamentales que rigen tu vida?",category:"VALORES",analysisType:"similarity"},{id:2,question:"¬øQu√© importancia le das a la religi√≥n o espiritualidad en tu d√≠a a d√≠a?",category:"RELIGI√ìN",analysisType:"importance"},{id:3,question:"¬øC√≥mo visualizas tu vida dentro de 10 a√±os? (profesi√≥n, lugar, estilo de vida)",category:"FUTURO",analysisType:"similarity"},{id:4,question:"¬øQu√© opinas sobre el matrimonio? ¬øEs algo esencial para ti?",category:"IMPORTANCIA DEL MATRIMONIO",analysisType:"importance"},{id:5,question:"¬øQu√© tan importante es para ti tener hijos?",category:"IMPORTANCIA DE LOS HIJOS",analysisType:"importance"},{id:6,question:"¬øC√≥mo sueles reaccionar cuando est√°s muy molesto o herido por alguien cercano?",category:"MANEJO DE CONFLICTOS",analysisType:"conflict_reaction"},{id:7,question:"¬øTe resulta f√°cil hablar sobre tus emociones en una relaci√≥n?",category:"COMUNICACI√ìN EMOCIONAL",analysisType:"communication"},{id:8,question:"¬øSientes ansiedad o inseguridad cuando tu pareja no est√° disponible emocionalmente?",category:"SEGURIDAD EMOCIONAL",analysisType:"security"},{id:9,question:"¬øC√≥mo act√∫as cuando hay un conflicto en la relaci√≥n?",category:"RESOLUCI√ìN DE CONFLICTOS",analysisType:"conflict_resolution"},{id:10,question:"¬øPrefieres resolver los problemas en el momento o tomar espacio antes de hablar?",category:"AUTOCONTROL",analysisType:"impulse_control"},{id:11,question:"¬øQu√© tan c√≥modo te sientes expresando tus necesidades y deseos en una relaci√≥n?",category:"COMUNICACI√ìN DE NECESIDADES",analysisType:"communication"},{id:12,question:"¬øC√≥mo manejas las cr√≠ticas en una relaci√≥n de pareja?",category:"TOLERANCIA",analysisType:"tolerance"},{id:13,question:"¬øPuedes dar un ejemplo de un conflicto que resolviste exitosamente con una expareja?",category:"RESOLUCI√ìN EXITOSA",analysisType:"success_rate"},{id:14,question:"¬øQu√© tan importante es para ti la sinceridad, incluso si duele?",category:"HONESTIDAD",analysisType:"honesty"},{id:15,question:"¬øTiendes a perdonar f√°cilmente o a guardar resentimiento?",category:"CAPACIDAD DE PERD√ìN",analysisType:"forgiveness"},{id:16,question:"¬øC√≥mo ser√≠a tu pareja ideal en cuanto a la personalidad?",category:"PROTOTIPO DE PERSONALIDAD",analysisType:"prototype"},{id:17,question:"¬øTienes alguna preferencia con el f√≠sico?",category:"PROTOTIPO F√çSICO",analysisType:"physical_preference"},{id:18,question:"¬øCu√°les son tus hobbies?",category:"INTERESES COMUNES",analysisType:"hobbies"}]);const re=()=>{const[d,e]=h.useState([]),[i,s]=h.useState(null),[n,r]=h.useState([]),[o,x]=h.useState(!0),[b,L]=h.useState(!1),[S,w]=h.useState(""),[v,j]=h.useState(!1),[C,A]=h.useState(0);h.useEffect(()=>{N()},[]);const N=async()=>{var a;x(!0);try{const l=localStorage.getItem("adminToken");if(!l){e([]),x(!1);return}const p=await fetch("http://localhost:3001/api/admin/questionnaires",{headers:{Authorization:`Bearer ${l}`,"Content-Type":"application/json"}});if(p.ok){const y=((a=(await p.json()).pareja)==null?void 0:a.questionnaires)||[];e(y)}else console.error("‚ùå API response not ok:",p.status),e([])}catch{e([])}finally{x(!1)}},I=async a=>{L(!0),s(a);const l=[],p=d.filter(c=>c.id!==a.id);for(const c of p)try{const y=Object.values(a.answers).map((f,k)=>({questionId:k+1,answer:typeof f=="string"?f:f.answer||"",score:3,category:"General"})),z=Object.values(c.answers).map((f,k)=>({questionId:k+1,answer:typeof f=="string"?f:f.answer||"",score:3,category:"General"})),Q=q.analyzeCompatibility(y,z);l.push({person:c,compatibility:Q,matchRank:0})}catch{}l.sort((c,y)=>y.compatibility.totalScore-c.compatibility.totalScore),l.forEach((c,y)=>{c.matchRank=y+1}),r(l),L(!1)},O=()=>n.filter(a=>{const l=S===""||`${a.person.personalInfo.nombre} ${a.person.personalInfo.apellidos}`.toLowerCase().includes(S.toLowerCase()),p=!v||a.compatibility.canShowPhotos,c=a.compatibility.compatibilityPercentage>=C;return l&&p&&c}),H=a=>a>=90?"text-green-600 bg-green-50 border-green-200":a>=80?"text-blue-600 bg-blue-50 border-blue-200":a>=70?"text-purple-600 bg-purple-50 border-purple-200":a>=60?"text-yellow-600 bg-yellow-50 border-yellow-200":"text-red-600 bg-red-50 border-red-200",B=a=>a===1?t.jsx(K,{className:"h-5 w-5 text-yellow-500"}):a===2?t.jsx(F,{className:"h-5 w-5 text-gray-400"}):a===3?t.jsx(F,{className:"h-5 w-5 text-orange-400"}):t.jsxs("span",{className:"text-gray-500 font-bold",children:["#",a]}),V=a=>a?new Date(a).toLocaleDateString("es-ES"):"N/A";return o?t.jsx("div",{className:"min-h-screen bg-gradient-to-br from-pink-50 to-purple-50 flex items-center justify-center",children:t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-pink-500 mx-auto mb-4"}),t.jsx("p",{className:"text-gray-600",children:"Cargando usuarios..."})]})}):t.jsx("div",{className:"min-h-screen bg-gradient-to-br from-pink-50 to-purple-50 p-6",children:t.jsxs("div",{className:"max-w-7xl mx-auto mb-8",children:[t.jsx("div",{className:"flex items-center justify-between mb-6",children:t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsxs(T,{onClick:()=>window.location.hash="#/admin-dashboard",variant:"outline",size:"sm",children:[t.jsx(D,{className:"h-4 w-4 mr-2"}),"Volver al Dashboard"]}),t.jsxs("div",{children:[t.jsxs("h1",{className:"text-3xl font-bold text-gray-800 flex items-center gap-3",children:[t.jsx(X,{className:"h-8 w-8 text-pink-500"}),"An√°lisis de Compatibilidad Masivo"]}),t.jsx("p",{className:"text-gray-600",children:"Selecciona una persona y encuentra sus mejores matches"})]})]})}),i?t.jsxs(t.Fragment,{children:[t.jsx(u,{className:"mb-8 bg-gradient-to-r from-pink-100 to-purple-100",children:t.jsx(P,{children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsxs("div",{className:"w-16 h-16 bg-gradient-to-r from-pink-500 to-purple-600 rounded-full flex items-center justify-center text-white font-bold text-xl",children:[i.personalInfo.nombre.charAt(0),i.personalInfo.apellidos.charAt(0)]}),t.jsxs("div",{children:[t.jsxs(E,{className:"text-2xl",children:[i.personalInfo.nombre," ",i.personalInfo.apellidos]}),t.jsxs("div",{className:"flex gap-3 mt-2",children:[t.jsxs(m,{variant:"secondary",children:[i.personalInfo.edad," a√±os"]}),t.jsx(m,{variant:"outline",children:i.personalInfo.genero}),t.jsx(m,{variant:"outline",children:i.personalInfo.orientacionSexual})]})]})]}),t.jsx(T,{onClick:()=>{s(null),r([])},variant:"outline",children:"Cambiar Persona"})]})})}),b?t.jsx(u,{children:t.jsxs(g,{className:"p-8 text-center",children:[t.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-pink-500 mx-auto mb-4"}),t.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Analizando Compatibilidad..."}),t.jsxs("p",{className:"text-gray-600",children:["Comparando con ",d.length-1," personas. Esto puede tomar unos segundos."]})]})}):n.length>0&&t.jsxs(t.Fragment,{children:[t.jsxs(u,{className:"mb-6",children:[t.jsx(P,{children:t.jsxs(E,{className:"flex items-center gap-2",children:[t.jsx($,{className:"h-5 w-5 text-gray-600"}),"Filtrar Resultados"]})}),t.jsx(g,{children:t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"üîç Buscar"}),t.jsx("input",{type:"text",placeholder:"Nombre...",value:S,onChange:a=>w(a.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-pink-500"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"üìä Compatibilidad M√≠nima"}),t.jsxs("select",{value:C,onChange:a=>A(parseInt(a.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-pink-500",children:[t.jsx("option",{value:0,children:"Todas (0%+)"}),t.jsx("option",{value:50,children:"Media (50%+)"}),t.jsx("option",{value:60,children:"Buena (60%+)"}),t.jsx("option",{value:70,children:"Muy Buena (70%+)"}),t.jsx("option",{value:80,children:"Excelente (80%+)"}),t.jsx("option",{value:90,children:"Perfecta (90%+)"})]})]}),t.jsx("div",{className:"flex items-end",children:t.jsxs("label",{className:"flex items-center gap-2",children:[t.jsx("input",{type:"checkbox",checked:v,onChange:a=>j(a.target.checked),className:"rounded border-gray-300 text-pink-600 focus:ring-pink-500"}),t.jsx("span",{className:"text-sm font-medium text-gray-700",children:"üì∏ Solo pueden ver fotos (60%+)"})]})}),t.jsx("div",{className:"text-right",children:t.jsxs("div",{className:"text-sm text-gray-600",children:[t.jsx("strong",{children:O().length})," de ",n.length," matches"]})})]})})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[t.jsx(u,{children:t.jsxs(g,{className:"p-4 text-center",children:[t.jsx("div",{className:"text-2xl font-bold text-green-600",children:n.filter(a=>a.compatibility.compatibilityPercentage>=80).length}),t.jsx("div",{className:"text-sm text-gray-600",children:"Matches Excelentes (80%+)"})]})}),t.jsx(u,{children:t.jsxs(g,{className:"p-4 text-center",children:[t.jsx("div",{className:"text-2xl font-bold text-blue-600",children:n.filter(a=>a.compatibility.canShowPhotos).length}),t.jsx("div",{className:"text-sm text-gray-600",children:"Pueden Ver Fotos (60%+)"})]})}),t.jsx(u,{children:t.jsxs(g,{className:"p-4 text-center",children:[t.jsxs("div",{className:"text-2xl font-bold text-purple-600",children:[n.length>0?Math.round(n[0].compatibility.compatibilityPercentage):0,"%"]}),t.jsx("div",{className:"text-sm text-gray-600",children:"Mejor Match"})]})}),t.jsx(u,{children:t.jsxs(g,{className:"p-4 text-center",children:[t.jsxs("div",{className:"text-2xl font-bold text-gray-600",children:[Math.round(n.reduce((a,l)=>a+l.compatibility.compatibilityPercentage,0)/n.length)||0,"%"]}),t.jsx("div",{className:"text-sm text-gray-600",children:"Promedio General"})]})})]}),t.jsx("div",{className:"space-y-4",children:O().map((a,l)=>t.jsx(u,{className:`transition-all hover:shadow-lg ${H(a.compatibility.compatibilityPercentage)} border-2`,children:t.jsxs(g,{className:"p-6",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[B(a.matchRank),t.jsxs("div",{className:"w-12 h-12 bg-gradient-to-r from-blue-400 to-indigo-500 rounded-full flex items-center justify-center text-white font-bold text-lg",children:[a.person.personalInfo.nombre.charAt(0),a.person.personalInfo.apellidos.charAt(0)]})]}),t.jsxs("div",{children:[t.jsxs("h3",{className:"text-lg font-semibold text-gray-800",children:[a.person.personalInfo.nombre," ",a.person.personalInfo.apellidos]}),t.jsxs("div",{className:"flex gap-2 mt-1",children:[t.jsxs(m,{variant:"secondary",className:"text-xs",children:[a.person.personalInfo.edad," a√±os"]}),t.jsx(m,{variant:"outline",className:"text-xs",children:a.person.personalInfo.genero}),t.jsx(m,{variant:"outline",className:"text-xs",children:a.person.personalInfo.orientacionSexual})]})]})]}),t.jsx("div",{className:"text-right",children:t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsxs("div",{children:[t.jsxs("div",{className:"text-2xl font-bold",children:[a.compatibility.compatibilityPercentage,"%"]}),t.jsx("div",{className:"text-sm text-gray-600",children:a.compatibility.compatibilityLevel.split(" - ")[1]||a.compatibility.compatibilityLevel})]}),t.jsx("div",{className:"w-24",children:t.jsx(W,{value:a.compatibility.compatibilityPercentage,className:"h-3"})}),t.jsxs("div",{className:"flex flex-col gap-2",children:[t.jsx(m,{variant:a.compatibility.canShowPhotos?"default":"destructive",className:"text-xs",children:a.compatibility.canShowPhotos?t.jsxs(t.Fragment,{children:[t.jsx(Y,{className:"h-3 w-3 mr-1"}),"Puede ver fotos"]}):t.jsxs(t.Fragment,{children:[t.jsx(J,{className:"h-3 w-3 mr-1"}),"No puede ver fotos"]})}),a.compatibility.shouldStopAnalysis&&t.jsx(m,{variant:"destructive",className:"text-xs",children:"‚ö†Ô∏è Requiere atenci√≥n"})]})]})})]}),t.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[t.jsxs("div",{children:[t.jsx("strong",{children:"Email:"})," ",a.person.personalInfo.correo]}),t.jsxs("div",{children:[t.jsx("strong",{children:"Puntuaci√≥n:"})," ",a.compatibility.totalScore,"/",a.compatibility.maxScore," puntos"]}),t.jsxs("div",{children:[t.jsx("strong",{children:"Completado:"})," ",V(a.person.completedAt)]})]}),a.compatibility.recommendations.length>0&&t.jsxs("div",{className:"mt-3",children:[t.jsx("strong",{className:"text-sm",children:"Recomendaciones:"}),t.jsx("ul",{className:"text-sm text-gray-600 mt-1",children:a.compatibility.recommendations.slice(0,2).map((p,c)=>t.jsxs("li",{className:"truncate",children:["‚Ä¢ ",p]},c))})]})]})]})},a.person.id))})]})]}):t.jsxs(u,{className:"mb-8",children:[t.jsx(P,{children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs(E,{className:"flex items-center gap-2",children:[t.jsx(R,{className:"h-6 w-6 text-blue-500"}),"Selecciona la Persona Principal"]}),t.jsxs(T,{onClick:N,variant:"outline",size:"sm",disabled:o,children:[o?t.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-500 mr-2"}):t.jsx("div",{className:"w-4 h-4 mr-2",children:"üîÑ"}),"Recargar"]})]})}),t.jsx(g,{children:o?t.jsxs("div",{className:"text-center py-12",children:[t.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-pink-500 mx-auto mb-4"}),t.jsx("h3",{className:"text-lg font-semibold text-gray-600 mb-2",children:"Cargando cuestionarios..."}),t.jsx("p",{className:"text-gray-500",children:"Conectando con la base de datos..."})]}):d.length===0?t.jsxs("div",{className:"text-center py-12",children:[t.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:t.jsx(R,{className:"h-8 w-8 text-gray-400"})}),t.jsx("h3",{className:"text-lg font-semibold text-gray-600 mb-2",children:"No hay cuestionarios disponibles"}),t.jsx("p",{className:"text-gray-500 mb-4",children:"Para usar el an√°lisis de compatibilidad, necesitas tener cuestionarios de pareja completados."}),t.jsxs("div",{className:"space-y-2 text-sm text-gray-600",children:[t.jsx("p",{children:"‚Ä¢ Ve al Panel de Administraci√≥n"}),t.jsx("p",{children:"‚Ä¢ Verifica que haya cuestionarios de pareja completados"}),t.jsx("p",{children:"‚Ä¢ Aseg√∫rate de estar logueado como administrador"})]}),t.jsxs(T,{onClick:()=>window.location.hash="#/admin-dashboard",variant:"outline",className:"mt-4",children:[t.jsx(D,{className:"h-4 w-4 mr-2"}),"Ir al Panel de Administraci√≥n"]})]}):t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:d.map(a=>t.jsx(u,{className:"hover:shadow-lg transition-shadow cursor-pointer border-2 hover:border-pink-300",onClick:()=>I(a),children:t.jsx(g,{className:"p-4",children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsxs("div",{className:"w-12 h-12 bg-gradient-to-r from-pink-400 to-purple-500 rounded-full flex items-center justify-center text-white font-bold text-lg",children:[a.personalInfo.nombre.charAt(0),a.personalInfo.apellidos.charAt(0)]}),t.jsxs("div",{className:"flex-1",children:[t.jsxs("h3",{className:"font-semibold text-gray-800",children:[a.personalInfo.nombre," ",a.personalInfo.apellidos]}),t.jsxs("div",{className:"flex gap-2 mt-1",children:[t.jsxs(m,{variant:"secondary",className:"text-xs",children:[a.personalInfo.edad," a√±os"]}),t.jsx(m,{variant:"outline",className:"text-xs",children:a.personalInfo.genero})]})]})]})})},a.id))})})]})]})})};export{re as default};
